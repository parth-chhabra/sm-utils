<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: file.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: file.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const _ = require('lodash');
const promisify = require('thenify-all');
const _path = require('path');
const _rimraf = promisify(require('rimraf'));
const _mkdirp = promisify(require('mkdirp'));
const _glob = promisify(require('glob'));
const _chmodr = promisify(require('chmodr'));
const _chownr = promisify(require('chownr'));
const System = require('./System');
const _fs = require('fs');

const fs = promisify(_fs);

/**
 * Class representing a File
 */
class File {

	/**
	 * Creates a new File object.
	 * @param  {String} path path to the file
	 */
	constructor(path) {
		this.path = path;
	}

	async exists() {
		try {
			await fs.lstat(this.path);
			return true;
		}
		catch (e) {
			return false;
		}
	}

	existsSync() {
		try {
			_fs.lstatSync(this.path);
			return true;
		}
		catch (e) {
			return false;
		}
	}

	/**
	 * Returns whether this File object represents a file.
	 * @return {Boolean} true, if this object represents a file; false, otherwise
	 */
	async isFile() {
		try {
			return (await fs.lstat(this.path)).isFile();
		}
		catch (e) {
			return false;
		}
	}

	/**
	 * Returns whether this File object represents a directory.
	 * @return {Boolean} true, if this object represents a directory; false, otherwise
	 */
	async isDir() {
		try {
			return (await fs.lstat(this.path)).isDirectory();
		}
		catch (e) {
			return false;
		}
	}

	async mtime() {
		try {
			return (await fs.lstat(this.path)).mtime;
		}
		catch (e) {
			return 0;
		}
	}

	async ctime() {
		try {
			return (await fs.lstat(this.path)).ctime;
		}
		catch (e) {
			return 0;
		}
	}

	async atime() {
		try {
			return (await fs.lstat(this.path)).atime;
		}
		catch (e) {
			return 0;
		}
	}

	async crtime() {
		try {
			return (await fs.lstat(this.path)).birthtime;
		}
		catch (e) {
			return 0;
		}
	}

	async lstat() {
		return fs.lstat(this.path);
	}

	async stat() {
		return fs.stat(this.path);
	}

	async size() {
		try {
			return (await fs.lstat(this.path)).size;
		}
		catch (e) {
			return 0;
		}
	}

	async chmod(mode) {
		return fs.chmod(this.path, mode);
	}

	async chmodr(mode) {
		return _chmodr(this.path, mode);
	}

	async chown(user, group) {
		if (Number.isInteger(user) &amp;&amp; Number.isInteger(group)) {
			return fs.chown(this.path, user, group);
		}

		return System.execOut(`chown ${user}:${group} ${this.path}`);
	}

	async chownr(user, group) {
		if (Number.isInteger(user) &amp;&amp; Number.isInteger(group)) {
			return _chownr(this.path, user, group);
		}

		return System.execOut(`chown -R ${user}:${group} ${this.path}`);
	}

	async rename(newName) {
		return fs.rename(this.path, newName);
	}

	async mv(newName) {
		return this.rename(this.path, newName);
	}

	async unlink() {
		return fs.unlink(this.path);
	}

	async rm() {
		return this.unlink();
	}

	async rmdir() {
		return fs.rmdir(this.path);
	}

	async rmrf() {
		return _rimraf(this.path);
	}

	async mkdir(mode = 0o755) {
		return fs.mkdir(this.path, mode);
	}

	async mkdirp(mode = 0o755) {
		return _mkdirp(this.path, mode);
	}

	async glob() {
		return _glob(this.path);
	}

	async read() {
		return fs.readFile(this.path, 'utf8');
	}

	async mkdirpPath(mode = 0o755) {
		return _mkdirp(_path.dirname(this.path), mode);
	}

	async write(contents, options = {}) {
		const opts = _.assign({
			fileMode: 0o644,
			dirMode: 0o755,
			retries: 0,
		}, options);

		if (!opts.retries) {
			await this.mkdirpPath(opts.dirMode);
			return fs.writeFile(this.path, contents, {encoding: 'utf8', mode: opts.fileMode});
		}

		try {
			return this.write(contents, _.assign(opts, {retries: 0}));
		}
		catch (e) {
			opts.retries--;
			return this.write(contents, opts);
		}
	}

	async append(contents, options = {}) {
		const opts = _.assign({
			fileMode: 0o644,
			dirMode: 0o755,
			retries: 0,
		}, options);

		if (!opts.retries) {
			await this.mkdirpPath(opts.dirMode);
			return fs.appendFile(this.path, contents, {encoding: 'utf8', mode: opts.fileMode});
		}

		try {
			return this.append(contents, _.assign(opts, {retries: 0}));
		}
		catch (e) {
			opts.retries--;
			return this.append(contents, opts);
		}
	}

	async copy(destination, options = {}) {
		const opts = _.assign({
			overwrite: true,
		}, options);

		if (opts.overwrite) {
			return fs.copyFile(this.path, destination);
		}

		return fs.copyFile(this.path, destination, fs.constants.COPYFILE_EXCL);
	}

	async realpath() {
		return fs.realpath(this.path);
	}

	realpathSync() {
		return _fs.realpathSync(this.path);
	}
}

function file(path) {
	return new File(path);
}

module.exports = file;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Connect.html">Connect</a></li><li><a href="File.html">File</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addDashesForUUID">addDashesForUUID</a></li><li><a href="global.html#base64Decode">base64Decode</a></li><li><a href="global.html#base64Encode">base64Encode</a></li><li><a href="global.html#base64UrlDecode">base64UrlDecode</a></li><li><a href="global.html#base64UrlEncode">base64UrlEncode</a></li><li><a href="global.html#baseEncode">baseEncode</a></li><li><a href="global.html#countBits">countBits</a></li><li><a href="global.html#decrypt">decrypt</a></li><li><a href="global.html#decryptStatic">decryptStatic</a></li><li><a href="global.html#encrypt">encrypt</a></li><li><a href="global.html#encryptedTimestampedId">encryptedTimestampedId</a></li><li><a href="global.html#encryptStatic">encryptStatic</a></li><li><a href="global.html#hash">hash</a></li><li><a href="global.html#hashPassword">hashPassword</a></li><li><a href="global.html#hmac">hmac</a></li><li><a href="global.html#javaObfuscate">javaObfuscate</a></li><li><a href="global.html#javaUnobfuscate">javaUnobfuscate</a></li><li><a href="global.html#makeProxyUrl">makeProxyUrl</a></li><li><a href="global.html#msCounter">msCounter</a></li><li><a href="global.html#nanoSecondsAlpha">nanoSecondsAlpha</a></li><li><a href="global.html#packNumbers">packNumbers</a></li><li><a href="global.html#randomString">randomString</a></li><li><a href="global.html#randomUUID">randomUUID</a></li><li><a href="global.html#rot47">rot47</a></li><li><a href="global.html#sequentialID">sequentialID</a></li><li><a href="global.html#sequentialUUID">sequentialUUID</a></li><li><a href="global.html#shuffle">shuffle</a></li><li><a href="global.html#sign">sign</a></li><li><a href="global.html#signAndEncrypt">signAndEncrypt</a></li><li><a href="global.html#unpackNumbers">unpackNumbers</a></li><li><a href="global.html#verify">verify</a></li><li><a href="global.html#verifyAndDecrypt">verifyAndDecrypt</a></li><li><a href="global.html#verifyPassword">verifyPassword</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Dec 07 2017 19:53:04 GMT+0530 (IST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
